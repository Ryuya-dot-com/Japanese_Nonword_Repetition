# 日本語復唱課題 録音ツール

ブラウザ上で日本語復唱課題を実施し、各スライドごとに音声を自動録音・WAVで保存するためのシングルページアプリです。付属のPDFを表示し、スライド音声（Slide1.wav〜Slide11.wav）を再生してから受験者の発話を録音します。

## 同梱物
- `index.html`: 録音アプリ本体。PDF.jsをCDNから読み込みます。
- `日本語復唱課題.pdf`: 提示用スライド。
- `Slide1.wav`〜`Slide11.wav`: 各スライドの提示音声。

## 動作環境
- Chrome / Edge など MediaRecorder をサポートする最新ブラウザ（マイク権限が必要）
- ローカルHTTPサーバ（安全なコンテキストでマイクを使うため）。Python 3 があればOK
- PCにマイクが接続されていること

## 使い方
1. ターミナルでこのフォルダへ移動し、ローカルサーバーを起動します。
   ```bash
   python3 -m http.server 8000
   ```
2. ブラウザで `http://localhost:8000/index.html` を開き、マイク使用を許可します。
3. 受験者IDを入力し「録音を開始」をクリックするとスライド1の音声が再生され、自動で録音が始まります。
4. 各スライドの録音が終了すると `ID_YYYYMMDD_hhmmss_slideXX.wav` 形式で自動ダウンロードされます。
5. スライド3が終わると一時停止します。次へ進むときはスペースキーを押してください。
6. 必要に応じて「録音を手動で開始」「録音を停止」ボタンで操作できます（音声再生に失敗した場合など）。

## 仕様メモ
- 録音はデフォルトで約8秒後に自動停止します（`index.html` 内の `autoStopMs` で調整可）。
- PDF読み込みに失敗する場合は上記のようにローカルサーバー経由で開いているか確認してください。
- 収録が終わるとステータス欄に完了メッセージが表示され、スライドを跨いで順次進行します。

## トラブルシューティング
- **マイクが使えない**: ブラウザがローカルHTTPまたはHTTPSで開かれているか、マイク権限が許可されているか確認してください。
- **音声が再生されない**: `Slide*.wav` が同じフォルダにあるか確認し、再生失敗時は「録音を手動で開始」ボタンを利用してください。
- **PDFが表示されない**: ローカルサーバー経由で開いているか確認し、それでも表示されない場合はターミナルのエラーを確認してください。
